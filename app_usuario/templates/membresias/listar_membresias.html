{% extends 'base.html' %}
{% load static %}
{% block titulo %}Membres√≠as | Sistema{% endblock %}

{% block contenido %}
<div class="page-header">
    <h2>Membres√≠as Registradas</h2>
    <a href="{% url 'app_usuario:crear_membresia' %}" class="btn btn-primary">+ Agregar Membres√≠a</a>
</div>

{% if membresias %}
<ul class="artist-grid">
    {% for membresia in membresias %}
    <li class="artist-card">
        {% if membresia.usuario.avatar %}
            <a href="{% url 'app_usuario:detalle_membresia' membresia.id_membresia %}">
                <img src="{{ membresia.usuario.avatar.url }}" alt="Avatar de {{ membresia.usuario.nombre_usuario }}" class="artist-img">
            </a>
        {% else %}
            <a href="{% url 'app_usuario:detalle_membresia' membresia.id_membresia %}">
                <div class="artist-placeholder">üë§</div>
            </a>
        {% endif %}

        <div class="artist-card-body" style="padding:1rem;">
            <a href="{% url 'app_usuario:detalle_membresia' membresia.id_membresia %}" style="text-decoration:none;color:inherit;"><h3>{{ membresia.usuario.nombre_usuario }}</h3></a>
            <p class="artist-nationality">{{ membresia.get_tipo_membresia_display }} ‚Ä¢ ${{ membresia.precio }}</p>
            <p class="artist-nationality">Inicio: {{ membresia.fecha_inicio|date:"d/m/Y" }} {% if membresia.fecha_expiracion %}‚Ä¢ Expira: {{ membresia.fecha_expiracion|date:"d/m/Y" }}{% endif %}</p>
            <p class="artist-nationality">Estado: {% if membresia.estado %}<span class="badge bg-success">Activa</span>{% else %}<span class="badge bg-danger">Inactiva</span>{% endif %}</p>
            <div style="display:flex;gap:0.5rem;margin-top:0.75rem;">
                <a href="{% url 'app_usuario:detalle_membresia' membresia.id_membresia %}" class="btn btn-primary">Ver</a>
                <a href="{% url 'app_usuario:editar_membresia' membresia.id_membresia %}" class="btn btn-secondary">Editar</a>
                <a href="{% url 'app_usuario:borrar_membresia' membresia.id_membresia %}" class="btn btn-danger">Borrar</a>
            </div>
        </div>
    </li>
    {% endfor %}
</ul>
{% else %}
    <div class="table-responsive">
        <p class="text-center">No hay membres√≠as registradas.</p>
    </div>
{% endif %}
{% endblock %}
